<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Horizontal Scroll â€” GSAP ScrollTrigger</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <!-- simple styles -->

    <style>
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: system-ui, Arial;
        -webkit-font-smoothing: antialiased;
      }
      .spacer {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        color: #444;
      }

      /* horizontal section */
      .horizontal-section {
        position: relative;
        width: 100%;
        height: 100vh; /* pinned viewport height */
        overflow: hidden; /* hide overflowing slides while we translate */
        /* background: #0f172a; */
        color: white;
      }

      .horizontal-wrapper {
        display: flex;
        height: 100%;
        will-change: transform;
      }

      .panel {
        flex: 0 0 100vw; /* each panel is full viewport width */
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: clamp(20px, 4vw, 48px);
        padding: 2rem;
      }
      .panel img {
        border-radius: 5px;
        overflow: hidden;
        box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
      }

      .panel-content {
        max-width: 900px;
        text-align: center;
      }

      /* responsive: on small screens we let native horizontal scroll (no pin) */
      @media (max-width: 640px) {
        .horizontal-section {
          height: auto;
          position: static;
          overflow: auto;
          padding: 2rem 0;
        }
        .horizontal-wrapper {
          display: block;
        }
        .panel {
          width: 90%;
          margin: 0 auto 1rem;
          flex: none;
          border-radius: 12px;
        }
      }
    </style>
  </head>
  <body>
    <section class="horizontal-section" id="horizontal">
      <div class="horizontal-wrapper">
        <div class="panel justify-content-around">
          <div
            class="card"
            style="
              width: 20rem;
              height: 90%;
              background-color: transparent;
              border: none;
            "
          >
            <img
              src="Assets/daulat nagar-- day view-- final-13.05.24.jpg"
              class="card-img-top"
              alt="..."
            />
            <div class="card-body">
              <h4>Ethical and transparent execution at every stage</h4>
            </div>
          </div>
          <div
            class="card"
            style="
              width: 20rem;
              height: 90%;
              background-color: transparent;
              border: none;
            "
          >
            <div
              class="card-body d-flex justify-content-center align-items-center"
            >
              <h4>Ethical and transparent execution at every stage</h4>
            </div>
            <img
              src="Assets/daulat nagar-- day view-- final-13.05.24.jpg"
              class="card-img-bottom"
              alt="..."
            />
          </div>
          <div
            class="card"
            style="
              width: 20rem;
              height: 90%;
              background-color: transparent;
              border: none;
            "
          >
            <img
              src="Assets/daulat nagar-- day view-- final-13.05.24.jpg"
              class="card-img-top"
              alt="..."
            />
            <div class="card-body">
              <h4>Ethical and transparent execution at every stage</h4>
            </div>
          </div>
        </div>
        <div class="panel justify-content-around">
          <div
            class="card"
            style="
              width: 20rem;
              height: 90%;
              background-color: transparent;
              border: none;
            "
          >
            <div
              class="card-body d-flex justify-content-center align-items-center"
            >
              <h4>Ethical and transparent execution at every stage</h4>
            </div>
            <img
              src="Assets/daulat nagar-- day view-- final-13.05.24.jpg"
              class="card-img-bottom"
              alt="..."
            />
          </div>
          <div
            class="card"
            style="
              width: 20rem;
              height: 90%;
              background-color: transparent;
              border: none;
            "
          >
            <img
              src="Assets/daulat nagar-- day view-- final-13.05.24.jpg"
              class="card-img-top"
              alt="..."
            />
            <div class="card-body">
              <h4>Ethical and transparent execution at every stage</h4>
            </div>
          </div>
          <div
            class="card"
            style="
              width: 20rem;
              height: 90%;
              background-color: transparent;
              border: none;
            "
          >
            <div
              class="card-body d-flex justify-content-center align-items-center"
            >
              <h4>Ethical and transparent execution at every stage</h4>
            </div>
            <img
              src="Assets/daulat nagar-- day view-- final-13.05.24.jpg"
              class="card-img-bottom"
              alt="..."
            />
          </div>
        </div>
      </div>
    </section>

    <!-- GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>

    <script>
      /* Verified setup for GSAP horizontal scroller */
      gsap.registerPlugin(ScrollTrigger);

      (function () {
        const section = document.querySelector("#horizontal");
        const wrapper = section.querySelector(".horizontal-wrapper");
        let tween, scrollTriggerInstance;

        function setup() {
          // kill previous instances when re-setting (resize)
          if (tween) {
            tween.kill();
            tween = null;
          }
          if (scrollTriggerInstance) {
            scrollTriggerInstance.kill();
            scrollTriggerInstance = null;
          }
          ScrollTrigger.getAll().forEach((st) => st.kill()); // be safe

          const panels = wrapper.children;
          const totalPanels = panels.length;

          // total width of wrapper and viewport width
          const wrapperWidth = wrapper.scrollWidth;
          const vw = window.innerWidth;

          // if mobile (or small width), skip pinning and horizontal translate
          if (window.matchMedia("(max-width: 640px)").matches) {
            // remove inline transform if any
            wrapper.style.transform = "none";
            return;
          }

          // amount to translate horizontally = wrapperWidth - viewportWidth
          const translateX = wrapperWidth - vw;

          // Create GSAP tween
          tween = gsap.to(wrapper, {
            x: () => -translateX, // negative translate to move left
            ease: "none",
            paused: true,
          });

          // Create ScrollTrigger to drive the tween
          scrollTriggerInstance = ScrollTrigger.create({
            animation: tween,
            trigger: section,
            start: "top top",
            end: () => "+=" + translateX, // end after we've scrolled enough to move fully
            scrub: 0.8,
            pin: true,
            anticipatePin: 1,
            invalidateOnRefresh: true,
            // markers: true // <-- uncomment while debugging
          });

          // refresh to ensure values are correct
          ScrollTrigger.refresh();
        }

        // Setup after page load (ensures images/fonts measured)
        window.addEventListener("load", () => {
          setup();
        });

        // Recalculate on resize with debounce
        let rTO;
        window.addEventListener("resize", () => {
          clearTimeout(rTO);
          rTO = setTimeout(() => {
            // Important: refresh ScrollTrigger and re-setup
            ScrollTrigger.refresh();
            setup();
          }, 120);
        });
      })();
    </script>
  </body>
</html>
